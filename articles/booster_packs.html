<!DOCTYPE HTML>
<html>
    <head>
        <title>Statistics of finding desired cards in TCG booster packs</title>
        <meta charset="utf-8" />
        <meta name="description" content="An explanation of the statistics behind opening trading card booster packs, and a JavaScript tool to calculate the likelihood of opening desired cards.">
        <meta name="author" content="Ethan Mitchell">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <link rel="shortcut icon" type="image/png" href="../images/e.png"/>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel="stylesheet">

        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/default.min.css">

        <link rel="stylesheet" href="../style.css?version=8">
    </head>
    <body>
        <div id="container">
            <a id="home-link" href="../index.html">
                <div id="header">&lt; Ethan Mitchell</div>
            </a>

            <p id="title">Statistics of finding desired cards in TCG booster packs</p>
            <p id="publish">January 2025</p>

            <section class="article-body">
                <h3>Overview</h3>
                <p>
                    Trading card games such as Magic the Gathering, Yu-Gi-Oh and Pokemon are comprised of cards that are each assigned
                    a rarity such as common, uncommon and rare (amongst other gameplay attributes). Players can purchase booster packs
                    to expand their collection, which are sealed, randomised packages of cards, most of which contain cards worth less
                    than the price of the booster pack, while some contain a chase card worth significantly more. Serious collectors
                    sometimes consider the expected value of a booster box (which contains 10-36 booster packs, depending on the product)
                    to determine if it is worth purchasing, using websites such as <a href="https://www.mtgstocks.com/analytics/expectedvalue">MTG Stocks</a>.
                    As someone who enjoys collecting and playing with trading cards instead of just selling them for profit, I am more
                    interested in answering questions like:
                </p>
                <ul>
                    <li>if I open $B$ booster packs, what is the probability of opening at least one copy of a particular card I want?</li>
                    <li>how many booster packs do I need to open to be more than 50% sure I will get at least one of the cards I want?</li>
                    <li>how many booster packs must I open to be 90% confident that I will open every rare card in the set?</li>
                </ul>
                <p>
                    In this article, I define a generalised mathematical model of a TCG booster pack (which can be applied to any
                    particular trading card game), and use it to answer the above questions.
                </p>

                <h3>Mathematical model</h3>
                <p>
                    Let $\mathcal{R}$ be the set of all card rarities present in the booster pack, and for a given rarity $r \in \mathcal{R}$,
                    let $S_r$ be number of cards of that rarity in the set (from which the booster pack is sampled). For example, consider
                    the <a href="https://sorcerytcg.com/sets/alpha">Alpha Edition of Sorcery: Contested Realm</a>. Using the
                    <a href="https://curiosa.io/cards">card search page</a> on their website, we find that the set contains (excluding
                    avatar cards) the rarities:
                </p>
                <ul>
                    <li>common with $S_C = 101$,</li>
                    <li>exceptional with $S_X = 128$,</li>
                    <li>elite with $S_E = 98$,</li>
                    <li>unique with $S_U = 66$ and</li>
                    <li>foil variants of each of the above rarities, with $S_{FC} = S_C$, $S_{FX} = S_X$, $S_{FE} = S_E$ and $S_{FU} = S_U$.</li>
                </ul>
                <p>
                    Let $N$ be the number of cards in a booster pack, and for any $n \in \{1, \ldots, N\}$ and $r \in \mathcal{R}$, let $p_{nr}$
                    denote the probability that card $n$ in the pack is of rarity $r$. If we assume that there are no special rules about booster
                    box guarantees or duplicate cards in packs (i.e., each booster pack card slot is sampled independently), then the
                    $N \times |\mathcal{R}|$ matrix $\boldsymbol{P}$ of these probabilities (along with the rarity set counts $S_r$) uniquely
                    defines the booster pack.
                </p>
                <div class="image">
                    <img src="../images/sorcery_booster.png" alt="The contents of a Sorcery TCG booster pack." style="max-width: 700px;">
                </div>
                <p>
                    Continuing the Sorcery example, using the above image and a 
                    https://www.collectorarthouse.com/collectors-corner/alpha-set-data
                    https://therealisticcollector.com/2023/09/05/sorcery-contested-realm-tcg-complete-print-run-numbers-and-pull-rates/
                </p>

                <h3>Likelihood of opening a desired card from multiple booster packs</h3>
                <p>TODO</p>

                <h3>Number of booster packs required to be confident in opening a desired card</h3>
                <p>TODO</p>

                <h3>Number of booster packs required to be confident in completing a rarity set</h3>
                <p>TODO</p>

                <!--
                https://math.stackexchange.com/questions/3161373/probability-of-certain-rarities-in-a-trading-card-game-booster-box

                describing a theoretical TCG set card rarities & variants and their total counts:
                - common (C) with S_C = 100 cards
                - uncommon (U) with S_U = 50 cards
                - rare (R) with S_R = 25 cards
                - mythic (M) with S_M = 10 cards
                - foil rare (FR) with S_FR = 25 cards
                - foil mythic (FM) with S_FM = 10 cards
                and denote the set of all rarities |R = {C, U, R, M, FR, FM}

                describing the card odds for each slot in a booster pack:
                - card 1: 100% common
                - card 2: 100% common
                - card 3: 100% common
                - card 4: 100% common
                - card 5: 80% common 20% rare
                - card 6: 100% uncommon
                - card 7: 100% uncommon
                - card 8: 80% uncommon 20% rare
                - card 9: 80% rare 20% mythic
                - card 10: 40% rare 10% mythic 40% foil rare 10% foil mythic
                call these probabilities P(card n is rarity r) = p_nr (imagine a N x R matrix of these probabilities)
                so for example, p_9c = 0, p_9u = 0, p_9r = 0.8 and p_9m = 0.2
                assume no booster box guarantees or special rules about duplicates

                Q: what is the probability of getting at least 1 mythic (foil or non-foil) in a booster pack?
                A: P(at least 1 mythic) = 1 - P(no mythics)
                                        = 1 - \prod_{n=1}^{N} P(card n is not mythic)
                                        = 1 - \prod_{n=1}^{N} (1 - p_nM - p_nFM)
                                        = 1 - (1 - p_9M) * (1 - p_10M - p_10FM)
                                        = 1 - 0.8 * 0.8
                                        = 0.36

                Q: what is the expected number of rare (foil or non-foil) cards in a booster pack?
                A: E[rare cards] = \sum_{n=1}^{N} P(card n is rare)
                                 = \sum_{n=1}^{N} (p_nR + p_nFR)
                                 = 0.2 + 0.2 + 0.8 + 0.8
                                 = 2

                Q: if I open B booster packs, what is the probability of pulling at least one copy of a particular card I want?
                A: lets say the particular card in question is a non-foil rare card and B=12
                   when we open B booster packs, we sample from each card slot B times (bc all packs are homogeneous and independent)
                   => P(open at least one of particular card) = 1 - P(open no copies of particular card)
                                                              = 1 - P(open no copies of particular card from a booster pack)^B
                                                              = 1 - [\prod_{n=1}^{N} P(card n is not particular card)]^B
                                                              = 1 - [\prod_{n=1}^{N} (1 - P(card n is particular card))]^B
                                                              = 1 - [\prod_{n=1}^{N} (1 - p_nR / S_R)]^B
                                                              = 1 - [(1 - 0.2/25) * (1 - 0.2/25) * (1 - 0.8/25) * (1 - 0.4/25)]^12
                                                              = 1 - [0.992 * 0.992 * 0.968 * 0.984]^12
                                                              ~= 0.54

                Q: if I open B booster packs, what is the probability of getting at least one of the cards I want?
                A: similarly to the previous answer, lets say we want 3 foil or non-foil rares and 2 foil or non-foil mythics and B=6
                   so the desired counts are d_C = d_U = 0 and d_R = d_M = d_FR = d_FM = 3
                   P(open at least one desired card) = 1 - P(open no desired cards)
                                                     = 1 - P(open no desired cards from a booster pack)^B
                                                     = 1 - [\prod_{n=1}^{N} P(card n is not desired)]^B
                                                     = 1 - [\prod_{n=1}^{N} (1 - P(card n is desired))]^B
                                                     = 1 - [\prod_{n=1}^{N} (1 - \sum_{r \in |R} d_r p_nr / S_r)]^B
                                                     = 1 - [(1 - 3*0.2/25) * (1 - 3*0.2/25) * (1 - 3*0.8/25 - 3*0.2/10) * (1 - 3*0.4/25 - 3*0.1/10 - 3*0.4/25 - 3*0.1/10)]^6
                                                     = 1 - [0.976 * 0.976 * 0.844 * 0.844]^6
                                                     ~= 0.9

                Q: how many booster packs do I need to open to be >= 50% sure I will open at least one of the cards I want?
                A: given what we derived in the above answer, lets say we want 3 foil or non-foil rares and 2 foil or non-foil mythics and let B be the number of booster packs
                   P(open at least one desired card) = 1 - [\prod_{n=1}^{N} (1 - \sum_{r \in |R} d_r p_nr / S_r)]^B
                                              => 0.5 <= 1 - [(1 - 3*0.2/25) * (1 - 3*0.2/25) * (1 - 3*0.8/25 - 3*0.2/10) * (1 - 3*0.4/25 - 3*0.1/10 - 3*0.4/25 - 3*0.1/10)]^B
                                                     = 1 - [0.976 * 0.976 * 0.844 * 0.844]^B
                                                     ~= 1 - 0.6786^B
                                         => 0.6786^B >= 0.5
                                                => B >= log(0.5) / log(0.6786) ~= 1.78
                    hence you need to open 3 booster packs to be 50% sure you will open at least one of the desired cards

                Q: how many booster packs do I need to open to be >= 90% sure I will open every rare in the set?
                A: we previously derived that E[rare cards] = 2 per booster pack
                   hence the expected number of rare cards from opening B booster packs is 2B
                   the number of ways to choose 2B cards from the set of S_R = S_FR rare cards is S_R^2B
                   how many of these sequences contain every rare card at least once? S_R! * S(2B, S_R) where S(n, k) is the Stirling number of the second kind
                   hence the probability of opening every rare card at least once is S_R! * S(2B, S_R) / S_R^2B
                   = [\sum_{i=0}^{S_R} (-1)^i * S_R_C_i * (S_R - i)^2B] / S_R^2B
                   = \sum_{i=0}^{S_R} (-1)^i * S_R_C_i * [(S_R - i) / S_R]^2B
                   this can't be simplified to make B the subject, but we can use a binary search to find the minimum B such that the probability is >= 0.9
                -->

                <h3>References</h3>
                <ol id="references">
                    <!-- TODO -->
                </ol>
                <p>
                    If you have any corrections or questions - please send me an email and we can have a discussion. Any
                    edits or additions to the original article & code will be noted here.
                </p>
            </section>

            <div class="footer">
                <p>Copyright &copy; Ethan Mitchell 2025</p>
                <p>ethanmitchell98@gmail.com</p>
            </div>
        </div>
    </body>

    <script>
        MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
            }
        };
    </script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/languages/glsl.min.js"></script>
    <script>hljs.highlightAll();</script>

</html>
